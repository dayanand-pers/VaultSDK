

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Vault SDK Android integration guideline &mdash; VaultSDK 1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="VaultSDK 1 documentation" href="#"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> VaultSDK
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Vault SDK Android integration guideline</a><ul>
<li><a class="reference internal" href="#embedding-the-sdk-into-your-application-mandatory">1.  Embedding the SDK into Your Application (Mandatory)</a><ul>
<li><a class="reference internal" href="#manually-include-jar-in-app">1.1 Manually include JAR In App</a></li>
<li><a class="reference internal" href="#add-the-vault-sdk-to-your-project">1.2  Add the Vault SDK to your Project</a></li>
<li><a class="reference internal" href="#set-the-required-permissions">1.3  Set the Required Permissions</a></li>
<li><a class="reference internal" href="#set-an-install-referrer-broadcastreceiver-in-androidmanifest-xml">1.4  Set an Install Referrer Broadcastreceiver in AndroidManifest.xml</a></li>
<li><a class="reference internal" href="#embed-google-play-services-into-your-app">1.5  Embed Google Play Services into Your App</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sdk-initialization-and-installation-event-minimum-requirement-for-tracking">2.  SDK Initialization and Installation Event (Minimum Requirement for Tracking)</a><ul>
<li><a class="reference internal" href="#initializing-the-sdk">2.1  Initializing the SDK</a></li>
<li><a class="reference internal" href="#reporting-background-sessions">2.2  Reporting Background Sessions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#in-app-events-tracking-api-optional">3.  In-App Events Tracking API (Optional)</a><ul>
<li><a class="reference internal" href="#vault-sdk-defined-events">3.1  Vault Sdk Defined Events</a><ul>
<li><a class="reference internal" href="#register">3.1.1 Register</a></li>
<li><a class="reference internal" href="#purchase">3.1.2 Purchase</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-events-advertiser-defined-events">3.2 Custom events(Advertiser defined events)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">VaultSDK</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Vault SDK Android integration guideline</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vault-sdk-android-integration-guideline">
<h1>Vault SDK Android integration guideline<a class="headerlink" href="#vault-sdk-android-integration-guideline" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="embedding-the-sdk-into-your-application-mandatory">
<h2>1.  Embedding the SDK into Your Application (Mandatory)<a class="headerlink" href="#embedding-the-sdk-into-your-application-mandatory" title="Permalink to this headline">¶</a></h2>
<p>The following steps are mandatory to measure installs and sessions.
You can integrate the Vault SDK either automatically using Gradle’s Dependency Management or manually as an SDK.aar.</p>
<div class="section" id="manually-include-jar-in-app">
<h3>1.1 Manually include JAR In App<a class="headerlink" href="#manually-include-jar-in-app" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Download jar from <a class="reference external" href="http://www.google.co.in/">here</a></li>
<li>Copy jar to your project’s libs folder</li>
<li>Add following line to your_app -&gt; build.gradle</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="p">{</span>
        <span class="nb">compile</span> <span class="n">fileTree</span><span class="p">(</span><span class="n">include</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;*.jar&#39;</span><span class="p">],</span> <span class="nb">dir</span><span class="p">:</span> <span class="s1">&#39;libs&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Sync and continue to <a class="reference internal" href="#id1">1.3</a> (No need to follow below step 1.2)</li>
</ul>
</div>
<div class="section" id="add-the-vault-sdk-to-your-project">
<h3>1.2  Add the Vault SDK to your Project<a class="headerlink" href="#add-the-vault-sdk-to-your-project" title="Permalink to this headline">¶</a></h3>
<p>The simplest way to integrate the SDK into your project is by using Gradle&#8217;s Dependency.
Adding Vault’s Android SDK Dependency:</p>
<ol class="arabic simple">
<li>Open your project (or create a new project), and then open your_app -&gt; build.gradle</li>
</ol>
<a class="reference internal image-reference" href="_images/folder_img.png"><img alt="alternate text" class="align-center" src="_images/folder_img.png" style="width: 350px; height: 250px;" /></a>
<ol class="arabic simple" start="2">
<li>Add this to Module-level /app/build.gradle before dependencies:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">repositories</span> <span class="p">{</span>
        <span class="n">mavenCentral</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Add the compile dependency with the latest version of the Vault SDK in the build.gradle file:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="p">{</span>
        <span class="nb">compile</span> <span class="s1">&#39;com.rappier:vault_sdk:version_code+@aar&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>version_code is latest version</p>
</div>
<div class="section" id="set-the-required-permissions">
<span id="id1"></span><h3>1.3  Set the Required Permissions<a class="headerlink" href="#set-the-required-permissions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The AndroidManifest.xml should include the following permissions:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;android.permission.INTERNET&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>ACCESS_WIFI_STATE and READ_PHONE_STATE permissions are optional.</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;android.permission.READ_PHONE_STATE&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<p>Adding this permission enables the carrier to track IMEI.</p>
</div>
<div class="section" id="set-an-install-referrer-broadcastreceiver-in-androidmanifest-xml">
<h3>1.4  Set an Install Referrer Broadcastreceiver in AndroidManifest.xml<a class="headerlink" href="#set-an-install-referrer-broadcastreceiver-in-androidmanifest-xml" title="Permalink to this headline">¶</a></h3>
<p>receiver:
Vault SDK provides a solution that broadcasts INSTALL_REFERRER to all other receivers automatically. In the AndroidManifest.xml, add the following receiver as the FIRST receiver for INSTALL_REFERRER, and ensure the receiver tag is within the application tag:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">receiver</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;com.rappier.vaultsdk.vaultlib.mainsdkclasses.TrackerEventReceiver&quot;</span> <span class="n">android</span><span class="p">:</span><span class="n">exported</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">intent</span><span class="o">-</span><span class="nb">filter</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">action</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;com.android.vending.INSTALL_REFERRER&quot;</span> <span class="o">/&gt;</span>
        <span class="o">&lt;/</span><span class="n">intent</span><span class="o">-</span><span class="nb">filter</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">receiver</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="embed-google-play-services-into-your-app">
<h3>1.5  Embed Google Play Services into Your App<a class="headerlink" href="#embed-google-play-services-into-your-app" title="Permalink to this headline">¶</a></h3>
<p>Collecting the Google Advertising ID (GAID) is essential for tracking campaigns across several channels including Facebook, Google and Twitter.
To add Google Advertising ID:</p>
<p>Install the Google Play Services SDK and import it into your project.
Add the following entry to the AndroidManifest.xml as the last entry under application (before &lt;/application&gt;):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">meta</span><span class="o">-</span><span class="n">data</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;com.google.android.gms.version&quot;</span><span class="n">android</span><span class="p">:</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;@integer/google_play_services_version&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<p>OR add following in build.gradle to avoid multidex exception:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="p">{</span>
        <span class="nb">compile</span> <span class="s1">&#39;com.google.android.gms:play-services-ads:google_play_services_version&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Vault uses the Google Play Services library for retrieving the Google Advertising ID.</li>
<li>Google Play Services 7.5 is the minimum requirement for the GCM Registration Token (which is used for our Uninstall measurement).  Vault recommends to always use the latest version.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="sdk-initialization-and-installation-event-minimum-requirement-for-tracking">
<h2>2.  SDK Initialization and Installation Event (Minimum Requirement for Tracking)<a class="headerlink" href="#sdk-initialization-and-installation-event-minimum-requirement-for-tracking" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is the minimum requirement to begin tracking your app installs.</p>
</div>
<div class="section" id="initializing-the-sdk">
<h3>2.1  Initializing the SDK<a class="headerlink" href="#initializing-the-sdk" title="Permalink to this headline">¶</a></h3>
<p>To initialize the SDK, add the following code to your Application’s onCreate function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Vault</span><span class="o">.</span><span class="n">initEvent</span><span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">,</span> <span class="n">String</span> <span class="n">APIkey</span><span class="p">,</span> <span class="nb">int</span> <span class="n">AdvertiserId</span><span class="p">,</span> <span class="n">String</span> <span class="n">Password</span><span class="p">,</span> <span class="n">String</span> <span class="n">GoogleAddId</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>context - use getApplicationContext()</li>
<li>APIkey is unique key get after registration in Vault system</li>
<li>AdvertiserId  is a unique Id generated while registration in Vault system</li>
<li>Password created while registration in Vault system</li>
<li>GoogleAddId need to take and send from app.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">APIkey, AdvertiserId, Password will get while register on portal of Vault for tracking. If not already register then click <a class="reference external" href="http://www.google.co.in/">here</a> to register.</p>
</div>
<p>This API enables Vault to detect installations, sessions, and updates.</p>
</div>
<div class="section" id="reporting-background-sessions">
<h3>2.2  Reporting Background Sessions<a class="headerlink" href="#reporting-background-sessions" title="Permalink to this headline">¶</a></h3>
<p>If your app is a utility app running in the background you can use the API as described in here to measure sessions and retention within Vault.</p>
</div>
</div>
<div class="section" id="in-app-events-tracking-api-optional">
<h2>3.  In-App Events Tracking API (Optional)<a class="headerlink" href="#in-app-events-tracking-api-optional" title="Permalink to this headline">¶</a></h2>
<p>There are two types of optional events contains in Vault sdk, 1) Sdk defined 2) Custom events</p>
<div class="section" id="vault-sdk-defined-events">
<h3>3.1  Vault Sdk Defined Events<a class="headerlink" href="#vault-sdk-defined-events" title="Permalink to this headline">¶</a></h3>
<p>This API enables Vault to track some in app events that are already defined in sdk. App just need to call the methods of event and use it with specific events.</p>
<p>Events:</p>
<div class="section" id="register">
<h4>3.1.1 Register<a class="headerlink" href="#register" title="Permalink to this headline">¶</a></h4>
<p>If app contain registration/signup event this event will useful to track whether installed app made registration complete or not</p>
<p>Syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Vault</span><span class="o">.</span><span class="n">setRegisterEvent</span><span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">,</span> <span class="n">String</span> <span class="n">APIkey</span><span class="p">,</span> <span class="nb">int</span> <span class="n">AdvertiserId</span><span class="p">,</span> <span class="n">String</span> <span class="n">Password</span><span class="p">,</span> <span class="n">String</span> <span class="n">GoogleAddId</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>context - use getApplicationContext()</li>
<li>APIkey is unique key get after registration in Vault system</li>
<li>AdvertiserId  is a unique Id generated while registration in Vault system</li>
<li>Password created while registration in Vault system</li>
<li>GoogleAddId need to take and send from app.</li>
</ul>
</div>
<div class="section" id="purchase">
<h4>3.1.2 Purchase<a class="headerlink" href="#purchase" title="Permalink to this headline">¶</a></h4>
<p>If app contain purchase event, this event will useful to track purchase</p>
<p>Syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Vault</span><span class="o">.</span><span class="n">setPurchaseEvent</span><span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">,</span> <span class="n">String</span> <span class="n">APIkey</span><span class="p">,</span> <span class="nb">int</span> <span class="n">AdvertiserId</span><span class="p">,</span> <span class="n">String</span> <span class="n">Password</span><span class="p">,</span> <span class="n">String</span> <span class="n">GoogleAddId</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>context - use getApplicationContext()</li>
<li>APIkey is unique key get after registration in Vault system</li>
<li>AdvertiserId  is a unique Id generated while registration in Vault system</li>
<li>Password created while registration in Vault system</li>
<li>GoogleAddId need to take and send from app.</li>
</ul>
</div>
</div>
<div class="section" id="custom-events-advertiser-defined-events">
<h3>3.2 Custom events(Advertiser defined events)<a class="headerlink" href="#custom-events-advertiser-defined-events" title="Permalink to this headline">¶</a></h3>
<p>This API enables Vault to track post install events. These events are defined by the advertiser and include an event name, in addition to optional event values.
Tracking in-app events helps you measure and analyze how loyal users discover your app, and attribute them to specific campaigns/media sources.</p>
<p>Syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Vault</span> <span class="n">setCustomEvent</span><span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">,</span> <span class="n">String</span> <span class="n">APIkey</span><span class="p">,</span> <span class="nb">int</span> <span class="n">AdvertiserId</span><span class="p">,</span> <span class="n">String</span> <span class="n">Password</span><span class="p">,</span> <span class="n">String</span> <span class="n">GoogleAddId</span><span class="p">,</span> <span class="n">String</span> <span class="n">customEventId</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>context - use getApplicationContext()</li>
<li>APIkey is unique key get after registration in Vault system</li>
<li>AdvertiserId  is a unique Id generated while registration in Vault system</li>
<li>Password created while registration in Vault system</li>
<li>GoogleAddId need to take and send from app.</li>
<li>customEventId event id generated while create custom event in Vault system</li>
</ul>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Rappier Pte. Ltd..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>